# Delegate

객체 지향 프로그램을 배우다 보면 상속을 남용하기도 합니다. 
상속을 사용해야 할 곳이 아닌 곳까지 상속을 사용하면 프로그램이 더러워지고 재사용이 어려워질 수 있습니다.

이러한 경우 상속을 위임으로 치환(Replace inheritance with Delegation)을 고려해 볼 수 있습니다.
이 리팩토링은 부적절한 상속을 위임으로 치환합니다.
이렇게 하면 클래스의 역할이 명확해지고 재사용도 쉬워집니다.

- 상황: 클래스에 상속 관계가 존재
- 문제:
  - 하위 클래스가 상위 클래스 기능의 일부만 사용(상속 거부)
  - 하위 클래스가 상속 클래스와 IS-A 관계가 아님
  - 리스코프 치환 원칙 위반
  - 계약을 지키지 않음
- 해법: 위임을 사용해서 상속을 치환

## 방법

1. 위임용 필드 도입
   1. 하위 클래스에 상위 클래스 타입의 위임용 필드 선언
   2. 생성자 안에서 위임용 필드를 this로 초기화
   3. 상속받던 메서드를 재작성해서 위임용 필드를 이용하게 함
2. 상속 간계 삭제
   1. 상위 클래스 선언 삭제
   2. 위임용 필드를 상위 클래스의 인스턴스로 초기화
   3. 지금까지 외부에서 암묵적으로 이용하던 메서드를 명시적으로 선언
   4. 그 메서드를 위임용 필드 경유 호출로 작성
   5. 컴파일해서 테스트

## Hide Delegate

자바 프로그램을 하다 보면 수많은 클래스가 등장합니다. 
클래스끼리는 서로 관계를 주고받는 복잡한 네트워크가 형성됩니다.
수많은 클래스가 협력해서 동작하려면 어떤 형태로든 관계 맺기는 필수 입니다.
하지만 관계가 너무나 복잡해지면 프로그램을 수정하기가 무척 어렵습니다.
수정하고 싶은 클래스가 단 하나라고 해도 여러 클래스에 그 여파가 퍼질 위험이 있기 때문입니다.

관계가 복잡해지는 원인 중 하나는, 각 클래스가 상세 구현을 다른 클래스에 지나치게 공개하기 때문입니다.
클라스 사이의 관계를 단순화하려면 정보 은폐가 필요합니다.


